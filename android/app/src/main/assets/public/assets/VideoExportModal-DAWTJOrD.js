import{j as e,a as c}from"./vendor-motion-DNtv-BOp.js";import{c as m,a as r,X as P,F as D,B as v,D as A,C as w,b as k,M as F,S as B,d as H,e as T,f as I}from"./index-HfbygEp5.js";import{z as U,A as V,B as K,D as W,E as Z,F as X,O as q,G,H as J,J as Q,K as Y,M as ee,N as te,Q as se,U as ae,W as re}from"./vendor-radix-CXwGJ_fK.js";import"./vendor-genai-BN8tTqBV.js";const oe=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],ne=m("arrow-right-left",oe);const ie=[["circle",{cx:"9",cy:"9",r:"7",key:"p2h5vp"}],["circle",{cx:"15",cy:"15",r:"7",key:"19ennj"}]],le=m("blend",ie);const de=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ce=m("circle-alert",de);const me=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"9",x2:"15",y1:"15",y2:"9",key:"1dfufj"}]],xe=m("circle-slash",me);const ue=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],pe=m("cloud",ue);const ge=[["path",{d:"M18 5a2 2 0 0 1 2 2v8.526a2 2 0 0 0 .212.897l1.068 2.127a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45l1.068-2.127A2 2 0 0 0 4 15.526V7a2 2 0 0 1 2-2z",key:"1pdavp"}],["path",{d:"M20.054 15.987H3.946",key:"14rxg9"}]],fe=m("laptop",ge);const he=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],be=m("settings",he);const ye=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],je=m("zoom-in",ye);function Ne({...t}){return e.jsx(U,{"data-slot":"dialog",...t})}function ve({...t}){return e.jsx(X,{"data-slot":"dialog-portal",...t})}function we({className:t,...s}){return e.jsx(q,{"data-slot":"dialog-overlay",className:r("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function ke({className:t,children:s,showCloseButton:n=!0,...d}){return e.jsxs(ve,{"data-slot":"dialog-portal",children:[e.jsx(we,{}),e.jsxs(V,{"data-slot":"dialog-content",className:r("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg",t),...d,children:[s,n&&e.jsxs(K,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(P,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Ce({className:t,...s}){return e.jsx("div",{"data-slot":"dialog-header",className:r("flex flex-col gap-2 text-center sm:text-left",t),...s})}function Ee({className:t,...s}){return e.jsx("div",{"data-slot":"dialog-footer",className:r("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function Se({className:t,...s}){return e.jsx(W,{"data-slot":"dialog-title",className:r("text-lg leading-none font-semibold",t),...s})}function ze({className:t,...s}){return e.jsx(Z,{"data-slot":"dialog-description",className:r("text-muted-foreground text-sm",t),...s})}function Me({className:t,value:s,...n}){return e.jsx(G,{"data-slot":"progress",className:r("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...n,children:e.jsx(J,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})})}var _e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],De=_e.reduce((t,s)=>{const n=Q(`Primitive.${s}`),d=c.forwardRef((i,g)=>{const{asChild:l,...f}=i,h=l?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(h,{...f,ref:g})});return d.displayName=`Primitive.${s}`,{...t,[s]:d}},{}),Re="Label",R=c.forwardRef((t,s)=>e.jsx(De.label,{...t,ref:s,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));R.displayName=Re;var $e=R;function p({className:t,...s}){return e.jsx($e,{"data-slot":"label",className:r("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}function Le({className:t,defaultValue:s,value:n,min:d=0,max:i=100,...g}){const l=c.useMemo(()=>Array.isArray(n)?n:Array.isArray(s)?s:[d,i],[n,s,d,i]);return e.jsxs(Y,{"data-slot":"slider",defaultValue:s,value:n,min:d,max:i,className:r("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",t),...g,children:[e.jsx(ee,{"data-slot":"slider-track",className:r("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:e.jsx(te,{"data-slot":"slider-range",className:r("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:l.length},(f,h)=>e.jsx(se,{"data-slot":"slider-thumb",className:"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},h))]})}function z({className:t,...s}){return e.jsx(ae,{"data-slot":"switch",className:r("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(re,{"data-slot":"switch-thumb",className:r("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const He=({songData:t,onClose:s,isOpen:n,contentMode:d="music"})=>{const[i,g]=c.useState({stage:"loading",progress:0,message:"Initializing..."}),[l,f]=c.useState(null),[h,C]=c.useState(null),[o,x]=c.useState({orientation:"landscape",useModernEffects:!0,syncOffsetMs:-50,fadeOutBeforeCut:!0,wordLevelHighlight:!0,contentMode:d,transitionType:"dissolve",transitionDuration:1.5}),[b,E]=c.useState(!1),[j,M]=c.useState(!1);c.useEffect(()=>()=>{l&&URL.revokeObjectURL(l)},[l]);const $=async()=>{E(!0),C(null),f(null);try{const N=await(j?T:I)(t,S=>{g(S)},o),y=URL.createObjectURL(N);f(y)}catch(a){console.error("Export failed:",a),C(a.message||"Export failed. Please try again."),E(!1)}},L=()=>{if(l){const a=document.createElement("a");a.href=l,a.download=`${t.fileName.replace(/\.[^/.]+$/,"")}-lyriclens-${o.orientation}.mp4`,document.body.appendChild(a),a.click(),document.body.removeChild(a)}},u=i.stage==="complete"&&l,O=()=>{switch(i.stage){case"loading":return"Loading FFmpeg";case"preparing":return"Preparing Assets";case"rendering":return"Rendering Frames";case"encoding":return"Encoding Video";case"complete":return"Complete";default:return"Processing"}};return e.jsx(Ne,{open:n,onOpenChange:a=>!a&&!b&&s(),children:e.jsxs(ke,{className:"sm:max-w-md md:max-w-lg bg-background border-border text-foreground",children:[e.jsxs(Ce,{children:[e.jsxs(Se,{className:"flex items-center gap-2 text-xl",children:[e.jsx(D,{className:"w-5 h-5 text-primary"}),u?"Video Ready!":b?"Exporting Video":"Export Settings"]}),e.jsxs(ze,{className:"text-muted-foreground",children:[!b&&!u&&"Customize your video export settings.",b&&!u&&"Please wait while we render your video.",u&&"Your video has been successfully generated."]})]}),e.jsx("div",{className:"py-4",children:h?e.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 rounded-xl p-6 text-center mb-6",children:[e.jsx(ce,{className:"w-12 h-12 text-destructive mx-auto mb-3"}),e.jsx("p",{className:"text-destructive mb-4",children:h}),e.jsx(v,{variant:"destructive",onClick:()=>C(null),children:"Try Again"})]}):b&&!u?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between text-xs uppercase tracking-wider",children:[e.jsx("span",{className:"text-primary font-medium",children:O()}),e.jsxs("span",{className:"text-muted-foreground",children:[Math.round(i.progress),"%"]})]}),e.jsx(Me,{value:i.progress,className:"h-2"}),e.jsx("p",{className:"text-sm text-muted-foreground text-center animate-pulse",children:i.message}),e.jsx("div",{className:"grid grid-cols-5 gap-1 pt-2",children:["loading","preparing","rendering","encoding","complete"].map((a,N)=>{const y=["loading","preparing","rendering","encoding","complete"],S=y.indexOf(i.stage),_=y.indexOf(a)<=S;return e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("div",{className:r("w-2 h-2 rounded-full transition-colors",_?"bg-primary":"bg-muted")}),e.jsx("span",{className:r("text-[9px] capitalize",_?"text-primary":"text-muted-foreground"),children:a})]},a)})})]}):u?e.jsxs("div",{className:"space-y-6",children:[l&&e.jsx("div",{className:"relative aspect-video rounded-lg overflow-hidden bg-black border border-border",children:e.jsx("video",{src:l,controls:!0,className:"w-full h-full"})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(v,{onClick:L,className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground font-bold border-0",children:[e.jsx(A,{className:"mr-2 h-4 w-4"})," Download MP4"]}),e.jsx(v,{variant:"ghost",className:"text-muted-foreground hover:text-foreground",onClick:()=>{E(!1),g({stage:"loading",progress:0,message:"Initializing..."}),f(null)},children:"Export Another Version"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(p,{className:"text-muted-foreground",children:"Render Engine"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(w,{className:r("cursor-pointer transition-all border-border bg-card hover:bg-muted",!j&&"border-primary bg-primary/10"),onClick:()=>M(!1),children:e.jsxs(k,{className:"flex flex-col items-center justify-center p-4 gap-2",children:[e.jsx(fe,{className:r("h-6 w-6",j?"text-muted-foreground":"text-primary")}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Browser"}),e.jsx("span",{className:"text-[10px] text-muted-foreground block",children:"Private, No Upload"})]})]})}),e.jsx(w,{className:r("cursor-pointer transition-all border-border bg-card hover:bg-muted",j&&"border-primary bg-primary/10"),onClick:()=>M(!0),children:e.jsxs(k,{className:"flex flex-col items-center justify-center p-4 gap-2",children:[e.jsx(pe,{className:r("h-6 w-6",j?"text-primary":"text-muted-foreground")}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Cloud"}),e.jsx("span",{className:"text-[10px] text-muted-foreground block",children:"Faster for 4K"})]})]})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(p,{className:"text-muted-foreground",children:"Video Orientation"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(w,{className:r("cursor-pointer transition-all border-border bg-card hover:bg-muted",o.orientation==="landscape"&&"border-primary bg-primary/10"),onClick:()=>x({...o,orientation:"landscape"}),children:e.jsxs(k,{className:"flex flex-col items-center justify-center p-4 gap-2",children:[e.jsx(F,{className:r("h-6 w-6",o.orientation==="landscape"?"text-primary":"text-muted-foreground")}),e.jsx("span",{className:"text-sm font-medium",children:"Landscape (16:9)"})]})}),e.jsx(w,{className:r("cursor-pointer transition-all border-border bg-card hover:bg-muted",o.orientation==="portrait"&&"border-primary bg-primary/10"),onClick:()=>x({...o,orientation:"portrait"}),children:e.jsxs(k,{className:"flex flex-col items-center justify-center p-4 gap-2",children:[e.jsx(B,{className:r("h-6 w-6",o.orientation==="portrait"?"text-primary":"text-muted-foreground")}),e.jsx("span",{className:"text-sm font-medium",children:"Portrait (9:16)"})]})})]})]}),e.jsxs("div",{className:"flex items-center justify-between space-x-2 p-3 rounded-lg border border-border bg-card",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs(p,{className:"text-base text-foreground flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4 text-primary"})," Cinematic Effects"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ken Burns zoom, smooth transitions, glow"})]}),e.jsx(z,{checked:o.useModernEffects,onCheckedChange:a=>x({...o,useModernEffects:a}),className:"data-[state=checked]:bg-primary"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(p,{className:"text-muted-foreground",children:"Scene Transitions"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:[{value:"none",label:"Cut",icon:xe},{value:"fade",label:"Fade",icon:H},{value:"dissolve",label:"Dissolve",icon:le},{value:"zoom",label:"Zoom",icon:je},{value:"slide",label:"Slide",icon:ne}].map(({value:a,label:N,icon:y})=>e.jsxs("button",{onClick:()=>x({...o,transitionType:a}),className:r("flex flex-col items-center gap-1 p-2 rounded-lg border transition-all text-xs",o.transitionType===a?"border-primary bg-primary/10 text-primary":"border-border bg-card text-muted-foreground hover:border-primary/30"),children:[e.jsx(y,{size:16}),e.jsx("span",{children:N})]},a))})]}),e.jsxs("div",{className:"space-y-4 pt-2 border-t border-border/50",children:[e.jsx(p,{className:"text-muted-foreground",children:"Lyric Animation"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Sync Offset"}),e.jsxs("span",{className:"text-xs text-primary font-mono",children:[o.syncOffsetMs,"ms"]})]}),e.jsx(Le,{min:-200,max:100,step:10,value:[o.syncOffsetMs],onValueChange:a=>x({...o,syncOffsetMs:a[0]}),className:"py-2"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Negative values make lyrics appear earlier."})]}),e.jsxs("div",{className:"flex items-center justify-between space-x-2",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(p,{className:"text-sm text-muted-foreground",children:"Word-by-Word Karaoke"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Highlight each word as it's sung"})]}),e.jsx(z,{checked:o.wordLevelHighlight,onCheckedChange:a=>x({...o,wordLevelHighlight:a})})]}),e.jsxs("div",{className:"flex items-center justify-between space-x-2",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(p,{className:"text-sm text-muted-foreground",children:"Fade Before Scene Change"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Lyrics fade out before transitions"})]}),e.jsx(z,{checked:o.fadeOutBeforeCut,onCheckedChange:a=>x({...o,fadeOutBeforeCut:a})})]})]})]})}),e.jsx(Ee,{className:"sm:justify-between",children:!b&&!u&&e.jsxs(v,{className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground font-bold border-0 h-11",onClick:$,children:[e.jsx(D,{className:"mr-2 h-4 w-4"})," Start Export"]})})]})})};export{He as VideoExportModal};
